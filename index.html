<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Selamat Ulang Tahun Sayang ‚ù§Ô∏è</title>
<link rel="stylesheet" href="style.css">
</head>
<body>

<canvas class="confetti" id="confetti"></canvas>

<!-- Overlay Countdown -->
<div id="overlay">
  <img src="https://media.giphy.com/media/3o7TKtnuHOHHUjR38Y/giphy.gif" alt="Perjalanan Kado" class="overlay-img">
  <div>Pesan spesial akan segera tiba...</div>
  <div id="overlayCountdown"></div>
</div>

<!-- Main Content -->
<div class="wrap" id="mainContent" style="display:none;">
  <div class="card">
    <div class="left-col">
      <div class="greeting">
        <h1>Selamat Ulang Tahun, <span id="nama">Sayang</span>! üéâ</h1>
        <div class="sub">Semoga hari ini penuh kejutan manis dan kebahagiaan.</div>
        <div class="countdown" id="countdown"></div>
      </div>
      <div class="message">
        <div><span class="typed" id="typed"></span></div>
        <div class="hint">Tunggu hingga waktunya untuk membuka pesan spesial ‚ú®</div>
      </div>
      <div class="controls">
        <button class="btn btn-pink" id="btnReveal" style="display:none;">Buka Pesan ‚ù§Ô∏è</button>
      </div>
      <div id="revealArea" style="display:none">
        <div class="big-message" id="specialMessage">üéÅ Selamat ulang tahun, Kadek! Semoga hari ini penuh cinta dan kebahagiaan! ‚ù§Ô∏è</div>
        <div class="footer">Dari: <strong>Nawairtas Satriawan</strong> ¬∑ <span>9 September 2025</span></div>
      </div>
    </div>

    <div class="right-col">
      <div class="photo-frame">
        <img id="photo" src="kadek/01.jpg" alt="Foto kalian">
      </div>
      <div class="made-text">S‚ù§S</div>
      <div class="hint">Klik "Buka Pesan" ‚ú®</div>
    </div>
  </div>
</div>

<script>
  const NAMA = "Kadek"; 
document.getElementById('nama').textContent = NAMA;

const overlay = document.getElementById('overlay');
const mainContent = document.getElementById('mainContent');
const overlayCountdown = document.getElementById('overlayCountdown');
const btnReveal = document.getElementById('btnReveal');
const countdownEl = document.getElementById('countdown');
const typedEl = document.getElementById('typed');
const specialMessageEl = document.getElementById('specialMessage');
const photo = document.getElementById('photo');

// --- Hitungan mundur sesuai WIB (GMT+7) ---
// WIB = UTC+7, jadi 12:00 WIB = 05:00 UTC
const revealDate = new Date(Date.UTC(2025, 8, 9, 5, 0, 0));

function updateCountdown() {
    const now = new Date();
    const distance = revealDate - now;

    if(distance <= 0) {
        overlay.style.display = "none";
        mainContent.style.display = "flex";
        clearInterval(countdownInterval);
        btnReveal.style.display = "inline-block";
        return;
    }

    const hours = Math.floor((distance / (1000 * 60 * 60)) % 24);
    const minutes = Math.floor((distance / (1000 * 60)) % 60);
    const seconds = Math.floor((distance / 1000) % 60);

    // Update overlay countdown
    overlayCountdown.textContent = `${String(hours).padStart(2,'0')}:${String(minutes).padStart(2,'0')}:${String(seconds).padStart(2,'0')}`;

    // Update main card countdown
    countdownEl.textContent = `${String(hours).padStart(2,'0')} jam ${String(minutes).padStart(2,'0')} menit ${String(seconds).padStart(2,'0')}`;
}

const countdownInterval = setInterval(updateCountdown, 1000);
updateCountdown();

// --- Tombol Buka Pesan ---
btnReveal.addEventListener('click', ()=>{
    specialMessageEl.parentElement.style.display = 'block';
    btnReveal.style.display = 'none';
    startConfetti();
    startSlideshow();
});

// --- Slideshow Foto ---
const dummyPhotos = ["kadek/01.jpg","kadek/02.jpg","kadek/03.jpg","kadek/04.jpg"];
let slideIndex = 0;
let slideInterval = null;
function startSlideshow() {
    slideInterval = setInterval(()=>{
        slideIndex = (slideIndex +1) % dummyPhotos.length;
        photo.src = dummyPhotos[slideIndex];
    },3000);
}

// --- Confetti ---
const canvas = document.getElementById('confetti');
const ctx = canvas.getContext('2d');
let W = canvas.width = window.innerWidth;
let H = canvas.height = window.innerHeight;
window.addEventListener('resize',()=>{ W=canvas.width=window.innerWidth; H=canvas.height=window.innerHeight; });

function random(min,max){ return Math.random()*(max-min)+min; }
function Confetti(){ 
    this.x=random(0,W); this.y=random(-H,0); this.r=random(6,12); this.d=random(10,30); 
    this.tilt=random(-10,10); this.tiltAngleInc=random(0.05,0.12); this.tiltAngle=0; 
    this.color=["#ff5e7e","#ffd166","#8ad1c2","#ff9bb3","#c7a4ff"][Math.floor(random(0,5))]; 
}
Confetti.prototype.draw=function(){ 
    ctx.beginPath(); ctx.fillStyle=this.color; 
    ctx.moveTo(this.x+this.tilt,this.y); 
    ctx.lineTo(this.x+this.tilt+this.r,this.y+this.r/2); 
    ctx.lineTo(this.x+this.tilt,this.y+this.r); 
    ctx.lineTo(this.x+this.tilt-this.r,this.y+this.r/2); 
    ctx.closePath(); ctx.fill(); 
}
let confetti=[];
function initConfetti(n=120){ confetti=[]; for(let i=0;i<n;i++) confetti.push(new Confetti()); }
function updateConfetti(){ 
    ctx.clearRect(0,0,W,H); 
    for(let i=0;i<confetti.length;i++){ 
        let p=confetti[i]; 
        p.tiltAngle+=p.tiltAngleInc; 
        p.y+=(Math.cos(p.d)+3+p.r/2)*0.6; 
        p.tilt=Math.sin(p.tiltAngle)*15; 
        if(p.y>H+20){ confetti[i]=new Confetti(); }
        confetti[i].draw(); 
    }
}
let confettiAnim=null;
function startConfetti(){
    initConfetti();
    if(confettiAnim) clearInterval(confettiAnim);
    confettiAnim = setInterval(updateConfetti,16);
}

</script>
</body>
</html>
